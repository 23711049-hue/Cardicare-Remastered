<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MediCore | Patient Super App</title>
    
    <link rel="stylesheet" href="css/style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;800&family=JetBrains+Mono:wght@400;700&display=swap" rel="stylesheet">

    <style>
        /* --- GLOBAL --- */
        body { font-family: 'Inter', sans-serif; background: #0f172a; color: white; margin: 0; }
        .app-container { display: flex; height: 100vh; width: 100%; overflow: hidden; }

        /* --- SIDEBAR --- */
        .sidebar {
            width: 260px; min-width: 260px;
            background-color: #1e293b !important;
            padding: 1.5rem; padding-top: 1rem;
            display: flex; flex-direction: column; justify-content: flex-start;
            border-right: 1px solid rgba(255,255,255,0.1);
            height: 100vh; z-index: 100; box-sizing: border-box; position: relative;
        }
        .logo-area { margin-bottom: 1.5rem; margin-top: 0.5rem; }
        .logo-area h1 { font-size: 1.4rem; margin: 0; color: #ffffff !important; font-weight: 800; display: flex; align-items: center; gap: 10px; }
        
        .nav-menu { display: flex; flex-direction: column; gap: 5px; }
        .nav-item {
            display: flex; align-items: center; gap: 12px; padding: 10px 15px;
            color: #e2e8f0 !important; text-decoration: none; border-radius: 10px;
            cursor: pointer; font-size: 0.95rem; transition: background 0.2s;
        }
        .nav-item:hover { background-color: rgba(255,255,255,0.1) !important; color: #ffffff !important; }
        .nav-item.active { background-color: #3b82f6 !important; color: #ffffff !important; box-shadow: 0 4px 12px rgba(59, 130, 246, 0.4); }
        
        /* Custom Colors per Feature */
        .nav-item#nav-drugs.active { background-color: #f59e0b !important; box-shadow: 0 4px 12px rgba(245, 158, 11, 0.4); }
        .nav-item#nav-lab.active { background-color: #10b981 !important; box-shadow: 0 4px 12px rgba(16, 185, 129, 0.4); }
        .nav-item#nav-triage.active { background-color: #8b5cf6 !important; box-shadow: 0 4px 12px rgba(139, 92, 246, 0.4); }
        .nav-item#nav-emergency.active { background-color: #ef4444 !important; box-shadow: 0 4px 12px rgba(239, 68, 68, 0.4); }

        .separator { margin: 1rem 0 0.5rem 10px; font-size: 0.7rem; color: #94a3b8; font-weight: 800; letter-spacing: 1px; }

        /* --- CONTENT --- */
        .main-content { flex: 1; padding: 2rem; overflow-y: auto; position: relative; background: radial-gradient(circle at top right, rgba(59,130,246,0.1), transparent 40%); }
        .user-greeting h2 { font-size: 1.5rem; margin: 0; }
        .user-greeting p { color: #94a3b8; margin-top: 5px; font-size: 0.9rem; }

        /* --- MODULES --- */
        .module-section { display: none; animation: fadeIn 0.5s ease; margin-top: 2rem; }
        .active-module { display: block; }
        
        /* Card Styles */
        .glass-card { background: rgba(30, 41, 59, 0.6); border: 1px solid rgba(255,255,255,0.1); border-radius: 16px; padding: 2rem; margin-bottom: 1.5rem; }
        .upload-zone { text-align: center; border: 2px dashed rgba(255,255,255,0.2); cursor: pointer; transition: 0.3s; min-height: 200px; display: flex; flex-direction: column; justify-content: center; align-items: center; background: rgba(255,255,255,0.02); border-radius: 12px; }
        .upload-zone:hover { border-color: #3b82f6; background: rgba(59, 130, 246, 0.05); }

        /* Chat Interface (Triage) */
        .chat-interface { display: flex; flex-direction: column; height: 500px; background: rgba(15, 23, 42, 0.6); border-radius: 16px; overflow: hidden; border: 1px solid rgba(255, 255, 255, 0.1); }
        .chat-container { flex: 1; overflow-y: auto; padding: 1.5rem; display: flex; flex-direction: column; gap: 1rem; }
        .message { display: flex; gap: 10px; max-width: 85%; }
        .message.bot-message { align-self: flex-start; }
        .message.user-message { align-self: flex-end; flex-direction: row-reverse; }
        .msg-content { padding: 12px 16px; border-radius: 12px; font-size: 0.95rem; line-height: 1.5; background: rgba(255,255,255,0.1); }
        .user-message .msg-content { background: #8b5cf6; }
        .input-area { padding: 1rem; background: rgba(15, 23, 42, 0.8); display: flex; gap: 10px; }
        .input-area input { flex: 1; background: rgba(255,255,255,0.05); border: 1px solid rgba(255,255,255,0.1); padding: 12px 20px; border-radius: 30px; color: white; outline: none; }

        /* Emergency */
        .emergency-header { background: linear-gradient(135deg, rgba(220, 38, 38, 0.2), rgba(30, 41, 59, 0.9)); border: 1px solid #ef4444; padding: 2rem; border-radius: 16px; margin-bottom: 2rem; text-align: center; }
        .hospital-card { background: rgba(255,255,255,0.05); border: 1px solid rgba(255,255,255,0.1); padding: 1.5rem; border-radius: 12px; display: flex; justify-content: space-between; align-items: center; transition: 0.3s; margin-bottom: 1rem; }
        
        /* Mobile */
        .mobile-menu-btn { display: none; position: fixed; top: 15px; left: 15px; z-index: 2000; background: #3b82f6; color: white; border: none; width: 45px; height: 45px; border-radius: 50%; box-shadow: 0 5px 15px rgba(0,0,0,0.5); font-size: 1.2rem; cursor: pointer; align-items: center; justify-content: center; }
        .sidebar-overlay { display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.8); z-index: 99; backdrop-filter: blur(5px); }

        @media (max-width: 768px) {
            .mobile-menu-btn { display: flex; }
            .sidebar { position: fixed; top: 0; left: -100%; height: 100vh; width: 260px; transition: 0.3s; box-shadow: 5px 0 25px rgba(0,0,0,0.9); padding-top: 2rem; }
            .sidebar.active { left: 0; }
            .sidebar-overlay.active { display: block; }
            .main-content { padding-top: 80px; padding-left: 1.5rem; padding-right: 1.5rem; }
            .drug-grid { grid-template-columns: 1fr !important; }
        }
        @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }
    </style>
</head>
<body>

    <button class="mobile-menu-btn" onclick="toggleSidebar()">
        <i class="fa-solid fa-bars"></i>
    </button>
    <div id="sidebarOverlay" class="sidebar-overlay" onclick="toggleSidebar()"></div>

    <div class="app-container">
        
        <nav class="sidebar">
            <div class="logo-area">
                <h1><i class="fa-solid fa-notes-medical" style="color: #3b82f6;"></i> MediCore</h1>
            </div>
            
            <div class="nav-menu">
                <a href="index.html" class="nav-item">
                    <i class="fa-solid fa-house"></i> Dashboard
                </a>
                
                <div class="separator">MY HEALTH TOOLS</div>
                
                <a href="javascript:void(0)" class="nav-item active" id="nav-drugs" onclick="switchTab('drugs')">
                    <i class="fa-solid fa-pills"></i> Drug Safety Check
                </a>
                
                <a href="javascript:void(0)" class="nav-item" id="nav-lab" onclick="switchTab('lab')">
                    <i class="fa-solid fa-file-medical-alt"></i> Lab Explainer
                </a>

                <a href="javascript:void(0)" class="nav-item" id="nav-triage" onclick="switchTab('triage')">
                    <i class="fa-solid fa-user-nurse"></i> Triage Buddy AI
                </a>
                
                <div class="separator" style="color:#ef4444;">EMERGENCY</div>
                <a href="javascript:void(0)" class="nav-item" id="nav-emergency" onclick="switchTab('emergency')">
                    <i class="fa-solid fa-truck-medical" style="color:#ef4444;"></i> RS & IGD Locator
                </a>
            </div>
        </nav>

        <main class="main-content">
            <header style="margin-bottom: 2rem; display: flex; justify-content: space-between; align-items: center;">
                <div>
                    <h2 class="user-greeting">Patient Space</h2>
                    <p style="color: #94a3b8; font-size: 0.9rem;">Your Personal AI Health Guardian</p>
                </div>
                <div style="background: rgba(16,185,129,0.1); color: #10b981; padding: 5px 12px; border-radius: 20px; font-size: 0.75rem; border: 1px solid rgba(16,185,129,0.2);">
                    ● ONLINE
                </div>
            </header>

            <section id="drugs-tab" class="module-section active-module">
                <div style="margin-bottom:1.5rem;">
                    <h3 style="color:#f59e0b; margin:0;"><i class="fa-solid fa-shield-halved"></i> Drug Interaction Checker</h3>
                    <p style="color:#94a3b8; font-size:0.9rem;">Cek keamanan kombinasi obat yang Anda minum.</p>
                </div>

                <div class="drug-grid" style="display:grid; grid-template-columns: 1fr 1fr; gap:1.5rem;">
                    <div class="glass-card upload-zone" onclick="document.getElementById('drug1Input').click()">
                        <input type="file" id="drug1Input" accept="image/*" hidden onchange="handleDrugUpload(this, 1)">
                        <div id="drug1Preview">
                            <i class="fa-solid fa-capsules" style="font-size: 2.5rem; color:#64748b; margin-bottom:10px;"></i>
                            <p style="margin:0; color:#94a3b8;">Foto Obat Pertama</p>
                        </div>
                        <img id="drug1Img" style="max-width:80%; max-height:150px; display:none; border-radius:8px;">
                    </div>
                    <div class="glass-card upload-zone" onclick="document.getElementById('drug2Input').click()">
                        <input type="file" id="drug2Input" accept="image/*" hidden onchange="handleDrugUpload(this, 2)">
                        <div id="drug2Preview">
                            <i class="fa-solid fa-tablets" style="font-size: 2.5rem; color:#64748b; margin-bottom:10px;"></i>
                            <p style="margin:0; color:#94a3b8;">Foto Obat Kedua</p>
                        </div>
                        <img id="drug2Img" style="max-width:80%; max-height:150px; display:none; border-radius:8px;">
                    </div>
                </div>

                <div style="text-align:center; margin-top:1rem;">
                    <button onclick="checkDrugInteraction()" style="background:#f59e0b; color:white; border:none; padding:12px 30px; border-radius:30px; font-weight:bold; cursor:pointer; font-size:1rem;">
                        <i class="fa-solid fa-magnifying-glass"></i> Cek Keamanan
                    </button>
                </div>

                <div id="drugResult" class="glass-card" style="margin-top:2rem; display:none; text-align:center;">
                    </div>
            </section>

            <section id="lab-tab" class="module-section">
                <div style="margin-bottom:1.5rem;">
                    <h3 style="color:#10b981; margin:0;"><i class="fa-solid fa-file-contract"></i> Lab Result Translator</h3>
                    <p style="color:#94a3b8; font-size:0.9rem;">Foto hasil lab Anda, AI akan menjelaskannya dengan bahasa sederhana.</p>
                </div>

                <div class="upload-zone" onclick="document.getElementById('labInput').click()" style="margin-bottom:2rem; border-color:#10b981;">
                    <input type="file" id="labInput" accept="image/*" hidden onchange="handleLabUpload(this)">
                    <div id="labPreviewText">
                        <i class="fa-solid fa-file-image" style="font-size: 3rem; color:#10b981; margin-bottom:1rem;"></i>
                        <p>Upload Foto Lembar Hasil Lab</p>
                    </div>
                    <img id="labImg" style="max-width:100%; max-height:300px; display:none; border-radius:10px;">
                </div>

                <div id="labResult" class="glass-card" style="display:none;">
                    </div>
            </section>

            <section id="triage-tab" class="module-section">
                <div style="margin-bottom:1rem;">
                    <h3 style="color:#8b5cf6; margin:0;"><i class="fa-solid fa-user-nurse"></i> Triage Buddy AI</h3>
                    <p style="color:#94a3b8; font-size:0.9rem;">Konsultasi gejala awal & saran tindakan (Bukan pengganti dokter).</p>
                </div>

                <div class="chat-interface">
                    <div id="chat-container" class="chat-container">
                        <div class="message bot-message">
                            <div style="width:35px; height:35px; background:#8b5cf6; border-radius:50%; display:flex; align-items:center; justify-content:center;"><i class="fa-solid fa-robot"></i></div>
                            <div class="msg-content">Halo! Apa yang Anda rasakan hari ini? Ceritakan gejalanya, saya akan bantu analisa risiko awalnya.</div>
                        </div>
                    </div>
                    <div class="input-area">
                        <input type="text" id="triageInput" placeholder="Contoh: Demam tinggi, bintik merah, lemas..." onkeypress="handleTriageEnter(event)">
                        <button onclick="sendTriage()" style="background:#8b5cf6; color:white; border:none; width:45px; height:45px; border-radius:50%; cursor:pointer;"><i class="fa-solid fa-paper-plane"></i></button>
                    </div>
                </div>
            </section>

            <section id="emergency-tab" class="module-section">
                <div class="emergency-header">
                    <h2 style="color:#ef4444; margin:0;"><i class="fa-solid fa-hospital"></i> UNIVERSAL IGD LOCATOR</h2>
                    <p style="color:#cbd5e1;">Mendeteksi RS dengan Fasilitas Gawat Darurat & Trauma Center Terdekat</p>
                    <button onclick="findNearestHospital()" style="background:#ef4444; color:white; border:none; padding:10px 20px; border-radius:30px; font-weight:bold; margin-top:1rem; cursor:pointer;">
                        <i class="fa-solid fa-location-crosshairs"></i> Refresh Lokasi
                    </button>
                </div>
                <div id="hospital-list" style="display:flex; flex-direction:column; gap:1rem;"></div>
            </section>

        </main>
    </div>

    <script src="js/config.js"></script>
    <script src="js/gemini.js"></script>
    
    <script>
        function toggleSidebar() { document.querySelector('.sidebar').classList.toggle('active'); document.getElementById('sidebarOverlay').classList.toggle('active'); }

        function switchTab(tabName) {
            document.querySelectorAll('.nav-item').forEach(el => el.classList.remove('active'));
            document.querySelectorAll('.module-section').forEach(el => el.classList.remove('active-module'));
            
            document.getElementById(tabName + '-tab').classList.add('active-module');
            document.getElementById('nav-' + tabName).classList.add('active');
            
            if(tabName === 'emergency') findNearestHospital();
            if(window.innerWidth < 768) toggleSidebar();
        }

        // --- 1. DRUG SAFETY LOGIC ---
        function handleDrugUpload(input, id) {
            if(input.files && input.files[0]) {
                const reader = new FileReader();
                reader.onload = function(e) {
                    document.getElementById('drug'+id+'Preview').style.display = 'none';
                    const img = document.getElementById('drug'+id+'Img');
                    img.src = e.target.result;
                    img.style.display = 'block';
                }
                reader.readAsDataURL(input.files[0]);
            }
        }

        function checkDrugInteraction() {
            const resBox = document.getElementById('drugResult');
            resBox.style.display = 'block';
            resBox.innerHTML = `<i class="fa-solid fa-spinner fa-spin" style="font-size:2rem; color:#f59e0b;"></i><p>Menganalisa Kandungan Obat...</p>`;
            
            // SIMULASI DEMO
            setTimeout(() => {
                resBox.innerHTML = `
                    <div style="background:rgba(239,68,68,0.2); padding:1rem; border-radius:10px; border:1px solid #ef4444;">
                        <h3 style="color:#ef4444; margin:0;"><i class="fa-solid fa-triangle-exclamation"></i> PERINGATAN INTERAKSI!</h3>
                        <p style="margin:10px 0; font-size:1.1rem;">Obat A (Aspirin) + Obat B (Warfarin)</p>
                        <hr style="border-color:rgba(255,255,255,0.1);">
                        <p style="color:#e2e8f0; font-size:0.95rem;">
                            Kombinasi ini meningkatkan risiko <b>pendarahan</b> secara signifikan. Kedua obat ini bekerja mengencerkan darah. 
                            Jangan diminum bersamaan tanpa pengawasan dokter ketat.
                        </p>
                    </div>
                `;
            }, 1500);
        }

        // --- 2. LAB EXPLAINER LOGIC ---
        function handleLabUpload(input) {
            if(input.files && input.files[0]) {
                const reader = new FileReader();
                reader.onload = function(e) {
                    document.getElementById('labPreviewText').style.display = 'none';
                    const img = document.getElementById('labImg');
                    img.src = e.target.result;
                    img.style.display = 'block';
                    
                    analyzeLab(e.target.result);
                }
                reader.readAsDataURL(input.files[0]);
            }
        }

        function analyzeLab(base64) {
            const resBox = document.getElementById('labResult');
            resBox.style.display = 'block';
            resBox.innerHTML = `<div style="text-align:center; padding:2rem;"><i class="fa-solid fa-spinner fa-spin" style="font-size:2rem; color:#10b981;"></i><p>Menerjemahkan Bahasa Medis...</p></div>`;

            // SIMULASI DEMO
            setTimeout(() => {
                resBox.innerHTML = `
                    <h3 style="color:#10b981; margin-top:0;">Penjelasan Hasil Lab</h3>
                    <div style="display:flex; flex-direction:column; gap:10px;">
                        <div style="background:rgba(255,255,255,0.05); padding:1rem; border-radius:8px;">
                            <div style="display:flex; justify-content:space-between;">
                                <span>Hemoglobin (Hb)</span>
                                <span style="color:#10b981; font-weight:bold;">Normal (14.0)</span>
                            </div>
                            <small style="color:#94a3b8;">Darah Anda cukup bagus, tidak kurang darah (anemia).</small>
                        </div>
                        <div style="background:rgba(255,255,255,0.05); padding:1rem; border-radius:8px; border-left:4px solid #ef4444;">
                            <div style="display:flex; justify-content:space-between;">
                                <span>Leukosit (Sel Darah Putih)</span>
                                <span style="color:#ef4444; font-weight:bold;">Tinggi (18.000)</span>
                            </div>
                            <small style="color:#e2e8f0;"><b>Artinya:</b> Tubuh sedang melawan infeksi (kemungkinan bakteri). Anda mungkin demam atau radang.</small>
                        </div>
                        <div style="background:rgba(255,255,255,0.05); padding:1rem; border-radius:8px;">
                            <div style="display:flex; justify-content:space-between;">
                                <span>Trombosit</span>
                                <span style="color:#10b981; font-weight:bold;">Normal (250.000)</span>
                            </div>
                            <small style="color:#94a3b8;">Pembekuan darah normal. Risiko DBD rendah.</small>
                        </div>
                    </div>
                `;
            }, 2000);
        }

        // --- 3. TRIAGE BUDDY LOGIC ---
        function handleTriageEnter(e) { if(e.key === 'Enter') sendTriage(); }
        
        async function sendTriage() {
            const input = document.getElementById('triageInput');
            const text = input.value.trim();
            if(!text) return;

            const container = document.getElementById('chat-container');
            container.innerHTML += `<div class="message user-message"><div class="msg-content">${text}</div></div>`;
            input.value = '';
            container.scrollTop = container.scrollHeight;

            // Loading
            const loadId = 'load'+Date.now();
            container.innerHTML += `<div id="${loadId}" class="message bot-message"><div class="msg-content"><i class="fa-solid fa-ellipsis fa-fade"></i></div></div>`;
            container.scrollTop = container.scrollHeight;

            // SIMULASI RESPON AI (Bisa diganti Real API Gemini Chat)
            setTimeout(() => {
                document.getElementById(loadId).remove();
                
                // Logic Sederhana untuk Demo
                let reply = "";
                let risk = "low";
                
                if(text.toLowerCase().includes("nyeri dada") || text.toLowerCase().includes("sesak")) {
                    reply = "⚠️ <b>RISIKO TINGGI (Merah):</b> Nyeri dada atau sesak bisa jadi tanda serangan jantung. <br><br><b>Saran:</b> Jangan tunggu, segera ke IGD terdekat. Minta orang lain mengantar Anda.";
                } else if(text.toLowerCase().includes("demam") || text.toLowerCase().includes("bintik")) {
                    reply = "⚠️ <b>RISIKO SEDANG (Kuning):</b> Demam dengan bintik bisa mengarah ke DBD atau Campak. <br><br><b>Saran:</b> Minum banyak air, cek suhu berkala. Jika lemas atau mimisan, segera ke RS.";
                } else {
                    reply = "✅ <b>RISIKO RENDAH (Hijau):</b> Gejala ini sepertinya ringan. Istirahat cukup dan pantau 24 jam. Jika memburuk, hubungi dokter.";
                }

                container.innerHTML += `
                    <div class="message bot-message">
                        <div style="width:35px; height:35px; background:#8b5cf6; border-radius:50%; display:flex; align-items:center; justify-content:center; flex-shrink:0;"><i class="fa-solid fa-robot"></i></div>
                        <div class="msg-content">${reply}</div>
                    </div>`;
                container.scrollTop = container.scrollHeight;
            }, 1500);
        }

        // --- 4. EMERGENCY (Universal DB) ---
        const hospitalDB = [
            { name: "RSUP Dr. Sardjito", type: "RSUP Pusat Rujukan", lat: -7.7686, lng: 110.3736 },
            { name: "RS JIH", type: "RS Swasta & Trauma Center", lat: -7.7566, lng: 110.4034 },
            { name: "RS Panti Rapih", type: "RS Umum & IGD 24 Jam", lat: -7.7770, lng: 110.3762 },
            { name: "RSUD Dr. Moewardi", type: "RSUD Pusat", lat: -7.5563, lng: 110.8359 },
            { name: "RS Hasan Sadikin", type: "RSUP Pusat (Bandung)", lat: -6.8967, lng: 107.5986 }
        ];

        function findNearestHospital() {
            const list = document.getElementById('hospital-list');
            list.innerHTML = `<div style="text-align:center; padding:2rem; color:#64748b;"><i class="fa-solid fa-satellite-dish fa-spin" style="font-size:2rem; margin-bottom:1rem;"></i><p>Mencari Lokasi...</p></div>`;

            if (!navigator.geolocation) { alert("GPS Error"); return; }

            navigator.geolocation.getCurrentPosition(
                (position) => {
                    const uLat = position.coords.latitude;
                    const uLng = position.coords.longitude;
                    const results = hospitalDB.map(h => {
                        const dist = calcDist(uLat, uLng, h.lat, h.lng);
                        return { ...h, distance: dist };
                    });
                    results.sort((a, b) => a.distance - b.distance);
                    
                    let html = "";
                    results.slice(0, 3).forEach(h => {
                        const mapLink = `https://www.google.com/maps/dir/?api=1&destination=${h.lat},${h.lng}`;
                        html += `
                        <div class="hospital-card">
                            <div>
                                <h4 style="margin:0 0 5px 0; color:white;">${h.name}</h4>
                                <p style="margin:0; font-size:0.85rem; color:#94a3b8;">${h.type}</p>
                                <span style="background:rgba(239,68,68,0.2); color:#ef4444; border:1px solid #ef4444; padding:2px 8px; border-radius:4px; font-size:0.7rem; font-weight:bold;">IGD 24 JAM</span>
                            </div>
                            <div style="text-align:right;">
                                <div style="font-size:1.4rem; font-weight:800; color:#ef4444;">${h.distance.toFixed(1)} km</div>
                                <a href="${mapLink}" target="_blank" style="text-decoration:none;">
                                    <button style="margin-top:5px; background:white; border:none; padding:5px 10px; border-radius:15px; cursor:pointer; font-weight:bold; font-size:0.8rem; color:#0f172a;">
                                        <i class="fa-solid fa-location-arrow"></i> NAVIGATE
                                    </button>
                                </a>
                            </div>
                        </div>`;
                    });
                    list.innerHTML = html;
                },
                (err) => { list.innerHTML = "Gagal akses GPS."; }, { enableHighAccuracy: true }
            );
        }
        function calcDist(lat1, lon1, lat2, lon2) {
            const R = 6371; const dLat = (lat2-lat1)*Math.PI/180; const dLon = (lon2-lon1)*Math.PI/180;
            const a = Math.sin(dLat/2)*Math.sin(dLat/2) + Math.cos(lat1*Math.PI/180)*Math.cos(lat2*Math.PI/180)*Math.sin(dLon/2)*Math.sin(dLon/2);
            return R * 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1-a));
        }
    </script>
</body>
</html>
